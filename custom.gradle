// 签名配置，方便调试
//读取签名配置文件
Properties propertySignCfg = new Properties()
propertySignCfg.load(new FileInputStream(file("sign/sign.cfg")))

def signingCfgCommonCl = {
    keyAlias propertySignCfg['KEY_ALIAS_YAXON']
    keyPassword propertySignCfg['KEY_PASSWORD_YAXON']
    storeFile file(propertySignCfg['KEYSTORE_FILE_YAXON'])
    storePassword propertySignCfg['KEYSTORE_PASSWORD_YAXON']
}

def buildTimeForFileNameFunc() {
    return "Build." + new Date().format("yyMMdd-HHmmss")
}

def getResStringValueFunc(resFile, name) {
    def value = name
    def resources = new XmlParser().parse(resFile)
    resources.string.each {
        if (it.attribute("name") == name) {
            return value = it.text()
        }
    }
    return value
}

ext {
    compileSdkVersion = 29
    buildToolsVersion = "29.0.3"
    minSdkVersion = 15
    versionCode = 1
    versionName = "1.0"

    signingCfgCommon = signingCfgCommonCl

    testExtendedProperies = "Hello, study ext properies"

    applicationIdSuffix = ".staging"

    buildTimeForFileName = this.&buildTimeForFileNameFunc

    getResStringValue = this.&getResStringValueFunc

    RELEASE_APK_SUFFIX_VERSION_NAME = true
    RELEASE_APK_SUFFIX_TIMESTAMP = true
}